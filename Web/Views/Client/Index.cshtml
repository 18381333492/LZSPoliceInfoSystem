
@{
    ViewBag.Title = "互动交流";
}
<div style="height:100%;width:100%">
    <table id="Client" style="height:100%;width:100%"></table>
    <div id="Client_toolbar" style="padding:20px;">
        <form id="searchForm">
            <div style="margin-bottom:5px">
                <span>模糊查询</span>
                <input type="text" class="form-control" name="sKeyWord">&nbsp;&nbsp;
                <a class="btn btn-primary btn-sm search" style="vertical-align: baseline">查 询</a>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
        $(function () {
            var admin = new adminPackage();
            //注册路由
            admin.routeRegister("Client");

            //查询操作
            $('#searchForm .search').on("click", function () {
                var params = $(admin.searchform).serializeArray().toObject();
                admin.grid.datagrid({
                    queryParams: params
                })
            });

            /*!
            * method:数据列表(datagrid)的绑定
            */
            admin.grid.datagrid({
                url: admin.route('List'),
                toolbar: admin.toolbar,
                fitColumns: true,
                singleSelect: true,
                columns: [[
                    { field: 'sName', title: '用户姓名', align: 'center', width: 120 },
                    { field: 'sPhone', title: '联系电话', align: 'center', width: 100 },
                    { field: 'sContent', title: '咨询内容', align: 'center', width: 300 },
                    {
                        field: 'iState', title: '状态', align: 'center', width: 80, formatter: function (value, row) {
                            if (value==0) {
                                return "<span style='color:red'>待处理</span>";
                            } else {
                                return "<span style='color:green'>已处理</span>";
                            }
                        }
                    },
                    { field: 'dInsertTime', title: '提交时间', align: 'center', width: 100 },
                    { field: 'dDoneTime', title: '处理时间', align: 'center', width: 100 },
                    {
                        field: 'ID', title: '操作', align: 'center', width: 100, formatter: function (value, row) {
                            var html = [];
                            html.push("<div style='padding:2px;'>")
                            html.push('<a class="btn btn-sm btn-success editData" data-id=' + row.ID + ' style="vertical-align: baseline">回复</a>&nbsp;&nbsp;');
                            html.push('</div>');
                            return html.join('');
                        }
                    },
                ]],
                onLoadSuccess: function () {
                    admin.grid.datagrid('resize');
                }
            });

        });




    </script>

